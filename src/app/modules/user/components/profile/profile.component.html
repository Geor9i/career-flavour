<div class="page-container">
  <p class="username">{{ firstName }} {{ lastName }}</p>
  <main>
    <section class="account">
      <p class="title">Account Settings</p>
      <form
        #accountForm="ngForm"
        (ngSubmit)="accountSubmitHandler(accountForm)"
      >
        <div class="main-input-box">
          <div class="input-box">
            <label for="first-name">First Name</label>
            <div>
              <input
                appGlowFields
                appString
                type="text"
                id="first-name"
                name="firstName"
                ngModel
                #firstNameInput="ngModel"
                minlength="2"
                maxlength="15"
                required
              />
            </div>
          </div>
          <div class="input-box">
            <label for="last-name">Last name</label>
            <div>
              <input
                appGlowFields
                appString
                type="text"
                id="last-name"
                name="lastName"
                #lastNameInput="ngModel"
                ngModel
                minlength="2"
                maxlength="15"
                required
              />
            </div>
          </div>
        </div>
        <input
          [style]="{
            backgroundColor: accountForm.invalid ? 'gray' : '#aaff70'
          }"
          [disabled]="accountForm.invalid"
          type="submit"
          value="Update Details"
        />
        <ng-template #detailsModal>
          <p class="modal-text">Are you sure you want to change your Name</p>
        </ng-template>
      </form>
    </section>

    <section class="change-password">
      <p class="title">Change password</p>
      <form
        #securityForm="ngForm"
        (ngSubmit)="passwordUpdateSubmitHandler(securityForm)"
      >
        <div class="main-input-box">
          <div class="input-box">
            <label for="password">Password</label>
            <div>
              <input
                appPassword
                appGlowFields
                appString
                type="password"
                id="password"
                name="password"
                ngModel
                #password="ngModel"
                minlength="6"
                required
              />
            </div>
          </div>
          <p class="errorMessage"></p>
          <div class="input-box">
            <label for="repeat-password">Repeat Password</label>
            <div>
              <input
                appPassword
                appGlowFields
                appString
                type="password"
                id="repeat-password"
                name="repeatPassword"
                ngModel
                #repeatPassword="ngModel"
                minlength="6"
                required
              />
            </div>
          </div>
        </div>
        <input
          [style]="{
            backgroundColor: securityForm.invalid ? 'gray' : '#aaff70'
          }"
          [disabled]="securityForm.invalid"
          type="submit"
          value="Change password"
        />
      </form>
    </section>

    <section class="email">
      <p class="title">Change Email</p>
      <div class="container">
        <p>Account email</p>
        <p>{{ this.email }}</p>
      </div>
      <form
        #emailForm="ngForm"
        (ngSubmit)="emailUpdateSubmitHandler(emailForm)"
      >
        <div class="main-input-box">
          <p
            style="color: red"
            *ngIf="emailInput.errors?.['appEmail'] && emailInput.value"
          >
            Invalid Email
          </p>
          <div class="input-box">
            <label for="email">Email</label>
            <div>
              <input
                appGlowFields
                appString
                appEmail
                type="text"
                id="email"
                name="email"
                ngModel
                required
                #emailInput="ngModel"
              />
            </div>
          </div>
        </div>
        <input
          [style]="{ backgroundColor: emailForm.invalid ? 'gray' : '#aaff70' }"
          [disabled]="emailForm.invalid"
          type="submit"
          value="Change Email"
        />
      </form>
    </section>
  </main>

  <section class="delete-account">
    <p>
      "If you're ready to say goodbye, simply click 'Delete Account' below.
      We'll miss you, but your happiness is what matters most. Thanks for being
      a part of our community!"
    </p>

    <a (click)="deleteAccountHandler()">Delete Account</a>

    <ng-template #deleteAccountModal>
      <div class="delete-modal">
        <p>Are you sure?</p>
        <p>This action cannot be reverted</p>
      </div>
    </ng-template>
  </section>
</div>
